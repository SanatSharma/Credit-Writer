<!DOCTYPE html>
<html >
<head>
  <meta charset="UTF-8">
  <title>Credit Writer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
  <script src="https://cdn.pubnub.com/sdk/javascript/pubnub.4.5.0.js"></script>

  <link rel='stylesheet prefetch' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css'>
<link rel='stylesheet prefetch' href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,700'>
<link rel='stylesheet prefetch' href='http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css'>

      <link rel="stylesheet" href="css/style.css">

  
</head>

<body>
  <div class="wrapper">
  <header role="header">
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target=".navbar-collapse" role="button">
            <span class="sr-only"></span>
            
            <span class="icon-bar"></span>
            
            <span class="icon-bar"></span>
            
            <span class="icon-bar"></span>
          </button>

          <a href="#" class="navbar-brand">CW</a>
        </div>

        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right js-nav">
            <li><a href="#home">Home</a></li>

            <li><a href="#about">Start</a></li>

            <li><a href="#services">About</a></li>

            <li><a href="#contact">Contact</a></li>

          </ul>
        </div>
      </div>
    </nav>
  </header>

  <section id="home" class="sec-main">
    <h1 class="main-heading">Credit Writer</h1>          
</div>
  </section>

  <section id="about" class="sec-about">
    <div class="container" ng-app="myApp" ng-controller="newPlaceCtrl">
    
    <h1>Get Started!</h1>

    <script>
function getInfo(){
  var pubnub = new PubNub({
        subscribeKey : 'sub-c-0a7113d8-095b-11e7-b09b-0619f8945a4f'
  });
  pubnub.addListener({
      status: function(statusEvent) {
      },
      message: function(message) {
        console.log(message);

        $("#musicTable ul").append('<li>'message.song + ' ' message.artist + ' ' + message.location</li>');
          // handle message
      },
      presence: function(presenceEvent) {
          // handle presence
      }
  });
     pubnub.subscribe({
        channels: ['server_starter'] 
    });
}
function publish(data) {
   
    pubnub = new PubNub({
        publishKey : 'pub-c-74cba35d-fcf7-4821-9932-a6a327f0a018',
        subscribeKey : 'sub-c-0a7113d8-095b-11e7-b09b-0619f8945a4f'
    })

    var publishConfig = {
          channel : "credit_writer",
          message : data
      }
      pubnub.publish(publishConfig,function(status, response){
        console.log(status,response);
      })
      
      pubnub.addListener({
        message: function(m) {
          // handle message
          var channelName = m.channel; // The channel for which the message belongs
          var channelGroup = m.subscription; // The channel group or wildcard subscription match (if exists)
          var pubTT = m.timetoken; // Publish timetoken
          var msg = m.message; // The Payload
      },
      presence: function(p) {
          // handle presence
          var action = p.action; // Can be join, leave, state-change or timeout
          var channelName = p.channel; // The channel for which the message belongs
          var occupancy = p.occupancy; // No. of users connected with the channel
          var state = p.state; // User State
          var channelGroup = p.subscription; //  The channel group or wildcard subscription match (if exists)
          var publishTime = p.timestamp; // Publish timetoken
          var timetoken = p.timetoken;  // Current timetoken
          var uuid = p.uuid; // UUIDs of users who are connected with the channel
      },
      status: function(s) {
          // handle status
          console.log(s);
      }
    })      
    console.log("Subscribing..");
    pubnub.subscribe({
        channels: ['credit_writer'] 
    });
};
    function ConvertFormToJSON(form){
        var array = jQuery(form).serializeArray();
        var json = {};
        
        jQuery.each(array, function() {
          json[this.name] = this.value || '';
        });
        
        return json;
    }
    
    jQuery(document).on('ready', function() {
      console.log('onready');
      getInfo();
        jQuery('form#add-new-item').bind('submit', function(event){
        event.preventDefault();
        
        var form = this;
        var json = ConvertFormToJSON(form);
        var tbody = jQuery('#list > tbody');
        console.log(json);
        publish(json);
        /*$.ajax({
          type: "GET",
          url: "/getjson.php",
          data: {
            json: JSON.stringify(json)
          },
          dataType: "json"
        }).always(function() { 
          tbody.append('<tr><th scope="row" style="background-color:' + form['hashtag'].value + 
            '"><input type="checkbox" /></th><td>' + form['city'].value +
            '</td><td>' + form['state'].value + '</td><td>'); 
        }).fail(function() { 
          alert("Failed to add them"); 
        });
        return true;
        });
      });*/
      })
    });

      </script>
      <form id="add-new-item">
          <label for="city">City:</label><br>
          <input id="city" name="city" type="text" required><br>
        
          <label for="new-hashtag">Hashtag:</label><br>
          <input id="hashtag" name="hashtag" type="text" required><br>
          
          <label for="state">State:</label>
          <select name="state">
            <option value="AL">AL</option>
            <option value="AK">AK</option>
            <option value="AS">AS</option>
            <option value="AZ">AZ</option>
            <option value="AR">AR</option>
            <option value="CA">CA</option>
            <option value="CO">CO</option>
            <option value="CT">CT</option>
            <option value="DE">DE</option>
            <option value="DC">DC</option>
            <option value="FL">FL</option>
            <option value="GA">GA</option>
            <option value="GU">GU</option>
            <option value="HI">HI</option>
            <option value="ID">ID</option>
            <option value="IL">IL</option>
            <option value="IN">IN</option>
            <option value="IA">IA</option>
            <option value="KS">KS</option>
            <option value="KY">KY</option>
            <option value="LA">LA</option>
            <option value="ME">ME</option>
            <option value="MD">MD</option>
            <option value="MH">MH</option>
            <option value="MA">MA</option>
            <option value="MI">MI</option>
            <option value="FM">FM</option>
            <option value="MN">MN</option>
            <option value="MS">MS</option>
            <option value="MO">MO</option>
            <option value="MT">MT</option>
            <option value="NE">NE</option>
            <option value="NV">NV</option>
            <option value="NH">NH</option>
            <option value="NJ">NJ</option>
            <option value="NM">NM</option>
            <option value="NY">NY</option>
            <option value="NC">NC</option>
            <option value="ND">ND</option>
            <option value="MP">MP</option>
            <option value="OH">OH</option>
            <option value="OK">OK</option>
            <option value="OR">OR</option>
            <option value="PW">PW</option>
            <option value="PA">PA</option>
            <option value="PR">PR</option>
            <option value="RI">RI</option>
            <option value="SC">SC</option>
            <option value="SD">SD</option>
            <option value="TN">TN</option>
            <option value="TX">TX</option>
            <option value="UT">UT</option>
            <option value="VT">VT</option>
            <option value="VA">VA</option>
            <option value="VI">VI</option>
            <option value="WA">WA</option>
            <option value="WV">WV</option>
            <option value="WI">WI</option>
            <option value="WY">WY</option>
          </select>
        <br>
        <input id="input" type="submit" name="submit" value="SEARCH" />
      </form>
      <div id="musicTable"><ul></ul></div>
  </section>
  
  <section id="services" class="sec-services">
    <div class="container">
      <h1>What We Do</h1>
      <hr />
      <div class="row">
        <div class="col-sm-6 col-sm-offset-3">
          <p>We used the Twitter API to access tweets. That data is then parsed and analized so we can send data to SoCan so they can know where the concert is and for what song theyre getting credit for.</p>
        </div>
      </div>
      <h1>APIs Used</h1>
      <hr />
      <div id="twitter">
        <a href="twitrer.com" target="_blank">
        <img class="twitter" border="0" src="http://www.statisticbrain.com/wp-content/uploads/2015/10/twitter-company-statistics.jpg"/></a>
        
        <a href="socan.com" target="_blank">
        <img class="socanlogo" border="0" alt="socan" src="https://www.socan.ca/files/images/SOCAN-logo-news-item-560-EN.png"/></a>
        
        <a href="mapquest.com">
        <img class="mapquest" border="0" src="http://www.blogcdn.com/blog.aol.com/media/2012/10/mapquestlogolarge.png"/></a>
        <a href="pubnub.com">
        <img class="pubnub" border="0" src="https://brandfolder.com/pubnub/logo/pubnub-primary-logo.png"/></a>
      </div>â€‹
    </div>
  </section>
  <section id="contact" class="sec-contact">
    <div class="container">
      <h1>Contact</h1>
      <hr />
      <div class="row">
        <div class="col-sm-4 col-sm-offset-4">
          <form class="center-block" action="#" method="post">
            <div class="form-group">
              <label class="sr-only" for="inputName">Full name</label>
              <input id="inputName" class="form-control" type="text" placeholder="Name" required />
            </div>
            <div class="form-group">
              <label for="inputMail" class="sr-only">Email Address</label>
              <input id="inputMail" class="form-control" type="email" placeholder="email@mail.com" required />
            </div>
            <div class="form-group">
              <label for="inputMessage" class="sr-only">Your Message</label>
              <textarea id="inputMessage" class="form-control" name="message" cols="30" rows="8" required></textarea>
            </div>
            <div class="form-group">
              <button class="btn btn-default center-block" type="submit" value="Hire me">Contact</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>
  <footer id="footer">
    <div class="container">
      <ul class="soc-media-ul">
        <li>
          <a href="http://twitter.com/AlexDevero" class="fa fa-twitter" target="_blank"></a>
        </li>
        <li>
          <a href="https://plus.google.com/u/0/+AlexDevero" class="fa fa-google-plus" target="_blank"></a>
        </li>
        <li>
          <a href="http://cz.linkedin.com/pub/alex-devero/38/262/70/" class="fa fa-linkedin" target="_blank"></a>
        </li>
        <li>
          <a href="https://www.behance.net/d3v3r0" class="fa fa-behance" target="_blank"></a>
        </li>
        <li>
          <a href="mailto:example@mail.com" class="fa fa-envelope"></a>
        </li>
      </ul>
      <h6>Â© 2017 Credit Writer, SXSW Hackathon</h6>
    </div>
  </footer>
</div>
  <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
<script src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js'></script>
    <script src="js/index.js"></script>
</body>
</html>
